// 字体配置
// 主字体栈：优先使用系统字体，然后使用中文字体，最后使用通用字体
$font-family-base: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, "Noto Sans", "Liberation Sans", "PingFang SC", "Hiragino Sans GB", "Microsoft YaHei", "微软雅黑", "Source Han Sans CN", "WenQuanYi Micro Hei", sans-serif;
// 等宽字体栈：用于代码、数字等
$font-family-mono: "SF Mono", Monaco, "Cascadia Code", "Roboto Mono", Consolas, "Courier New", monospace;
// 数字字体栈：优化数字显示
$font-family-numeric: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;

// 字体大小
$font-size-base: 14px;
$font-size-small: 12px;
$font-size-large: 16px;
$font-size-extra-large: 18px;

// 字体权重
$font-weight-normal: 400;
$font-weight-medium: 500;
$font-weight-semibold: 600;
$font-weight-bold: 700;

// 行高
$line-height-base: 1.5;
$line-height-tight: 1.25;
$line-height-loose: 1.75;

// base color
$blue: #324157;
$light-blue: #333c46;
$red: #C03639;
$pink: #E65D6E;
$green: #30B08F;
$tiffany: #4AB7BD;
$yellow: #FEC171;
$panGreen: #30B08F;

// 默认主题变量
$menuText: #bfcbd9;
$menuActiveText: #409eff;
$menuBg: #304156;
$menuHover: #263445;

// 浅色主题theme-light
$menuLightBg: #ffffff;
$menuLightHover: #f0f1f5;
$menuLightText: #303133;
$menuLightActiveText: #409EFF;

// 基础变量
$base-sidebar-width: 200px;
$sideBarWidth: 200px;

// 菜单暗色变量
$base-menu-color: #bfcbd9;
$base-menu-color-active: #f4f4f5;
$base-menu-background: #304156;
$base-sub-menu-background: #1f2d3d;
$base-sub-menu-hover: #001528;

// 组件变量
$--color-primary: #409EFF;
$--color-success: #67C23A;
$--color-warning: #E6A23C;
$--color-danger: #F56C6C;
$--color-info: #909399;

:export {
  menuText: $menuText;
  menuActiveText: $menuActiveText;
  menuBg: $menuBg;
  menuHover: $menuHover;
  menuLightBg: $menuLightBg;
  menuLightHover: $menuLightHover;
  menuLightText: $menuLightText;
  menuLightActiveText: $menuLightActiveText;
  sideBarWidth: $sideBarWidth;
  // 导出基础颜色
  blue: $blue;
  lightBlue: $light-blue;
  red: $red;
  pink: $pink;
  green: $green;
  tiffany: $tiffany;
  yellow: $yellow;
  panGreen: $panGreen;
  // 导出组件颜色
  colorPrimary: $--color-primary;
  colorSuccess: $--color-success;
  colorWarning: $--color-warning;
  colorDanger: $--color-danger;
  colorInfo: $--color-info;
  // 导出字体配置
  fontFamilyBase: $font-family-base;
  fontFamilyMono: $font-family-mono;
  fontFamilyNumeric: $font-family-numeric;
  fontSizeBase: $font-size-base;
  fontSizeSmall: $font-size-small;
  fontSizeLarge: $font-size-large;
  fontSizeExtraLarge: $font-size-extra-large;
  fontWeightNormal: $font-weight-normal;
  fontWeightMedium: $font-weight-medium;
  fontWeightSemibold: $font-weight-semibold;
  fontWeightBold: $font-weight-bold;
  lineHeightBase: $line-height-base;
  lineHeightTight: $line-height-tight;
  lineHeightLoose: $line-height-loose;
}

// CSS变量定义
:root {
  /* 字体变量 */
  --font-family-base: #{$font-family-base};
  --font-family-mono: #{$font-family-mono};
  --font-family-numeric: #{$font-family-numeric};
  --font-size-base: #{$font-size-base};
  --font-size-small: #{$font-size-small};
  --font-size-large: #{$font-size-large};
  --font-size-extra-large: #{$font-size-extra-large};
  --font-weight-normal: #{$font-weight-normal};
  --font-weight-medium: #{$font-weight-medium};
  --font-weight-semibold: #{$font-weight-semibold};
  --font-weight-bold: #{$font-weight-bold};
  --line-height-base: #{$line-height-base};
  --line-height-tight: #{$line-height-tight};
  --line-height-loose: #{$line-height-loose};
  
  /* 亮色模式变量 */
  --sidebar-bg: #{$menuBg};
  --sidebar-text: #{$menuText};
  --menu-hover: #{$menuHover};
  
  --navbar-bg: #ffffff;
  --navbar-text: #303133;
  
  /* splitpanes default-theme 变量 */
  --splitpanes-default-bg: #ffffff;

}

// 暗黑模式变量
html.dark {
  /* 默认通用 */
  --el-bg-color: #141414;
  --el-bg-color-overlay: #1d1e1f;
  --el-text-color-primary: #ffffff;
  --el-text-color-regular: #d0d0d0;
  --el-border-color: #434343;
  --el-border-color-light: #434343;

  /* 侧边栏 */
  --sidebar-bg: #141414;
  --sidebar-text: #ffffff;
  --menu-hover: #2d2d2d;
  --menu-active-text: #{$menuActiveText};

  /* 顶部导航栏 */
  --navbar-bg: #141414;
  --navbar-text: #ffffff;
  --navbar-hover: #141414;

  /* 标签栏 */
  --tags-bg: #141414;
  --tags-item-bg: #1d1e1f;
  --tags-item-border: #303030;
  --tags-item-text: #d0d0d0;
  --tags-item-hover: #2d2d2d;
  --tags-close-hover: #64666a;

  /* splitpanes 组件暗黑模式变量 */
  --splitpanes-bg: #141414;
  --splitpanes-border: #303030;
  --splitpanes-splitter-bg: #1d1e1f;
  --splitpanes-splitter-hover-bg: #2d2d2d;

  /* blockquote 暗黑模式变量 */
  --blockquote-bg: #1d1e1f;
  --blockquote-border: #303030;
  --blockquote-text: #d0d0d0;
  
  /* Cron 时间表达式 模式变量 */
  --cron-border: #303030;

  /* splitpanes default-theme 暗黑模式变量 */
  --splitpanes-default-bg: #141414;

  /* 侧边栏菜单覆盖 */
   .sidebar-container {
    .el-menu-item, .menu-title {
      color: var(--el-text-color-regular);
    }
    & .theme-dark .nest-menu .el-sub-menu>.el-sub-menu__title,
    & .theme-dark .el-sub-menu .el-menu-item {
      background-color: var(--el-bg-color) !important;
    }
  }

  /* 顶部栏栏菜单覆盖 */
  .el-menu--horizontal {
    .el-menu-item {
      &:not(.is-disabled) {
        &:hover,
        &:focus {
          background-color: var(--navbar-hover) !important;
        }
      }
    }
  }

  /* 分割窗格覆盖 */
  .splitpanes {
    background-color: var(--splitpanes-bg);

    .splitpanes__pane {
      background-color: var(--splitpanes-bg);
      border-color: var(--splitpanes-border);
    }

    .splitpanes__splitter {
      background-color: var(--splitpanes-splitter-bg);
      border-color: var(--splitpanes-border);

      &:hover {
        background-color: var(--splitpanes-splitter-hover-bg);
      }

      &:before,
      &:after {
        background-color: var(--splitpanes-border);
      }
    }
  }

  /* 表格样式覆盖 */
  .el-table {
    --el-table-header-bg-color: var(--el-bg-color-overlay) !important;
    --el-table-header-text-color: var(--el-text-color-regular) !important;
    --el-table-border-color: var(--el-border-color-light) !important;
    --el-table-row-hover-bg-color: var(--el-bg-color-overlay) !important;

    .el-table__header-wrapper, .el-table__fixed-header-wrapper {
      th {
        background-color: var(--el-bg-color-overlay, #f8f8f9) !important;
        color: var(--el-text-color-regular, #515a6e);
      }
    }
  }

  /* 树组件高亮样式覆盖 */
  .el-tree {
    .el-tree-node.is-current > .el-tree-node__content {
      background-color: var(--el-bg-color-overlay) !important;
      color: var(--el-color-primary);
    }

    .el-tree-node__content:hover {
      background-color: var(--el-bg-color-overlay);
    }
  }
  
  /* 下拉菜单样式覆盖 */
  .el-dropdown-menu__item:not(.is-disabled):focus, .el-dropdown-menu__item:not(.is-disabled):hover{
    background-color: var(--navbar-hover) !important;
  }

  /* blockquote样式覆盖 */
  blockquote {
    background-color: var(--blockquote-bg) !important;
    border-left-color: var(--blockquote-border) !important;
    color: var(--blockquote-text) !important;
  }
  
  /* 时间表达式标题样式覆盖 */
  .popup-result .title {
    background: var(--cron-border);
  }

  /* 指标卡片暗色模式样式 */
  .stat-card {
    border: 1px solid rgba(255, 255, 255, 0.1) !important;
    background: rgba(255, 255, 255, 0.05) !important;
    
    :deep(.el-card__body) {
      background: rgba(255, 255, 255, 0.05) !important;
    }
    
    &:hover {
      border-color: currentColor !important;
      box-shadow: 0 4px 12px rgba(0, 0, 0, 0.3) !important;
      background: rgba(255, 255, 255, 0.08) !important;
      
      :deep(.el-card__body) {
        background: rgba(255, 255, 255, 0.08) !important;
      }
    }

    .stat-content-compact {
      .stat-info-compact {
        .stat-label-compact {
          color: rgba(255, 255, 255, 0.6) !important;
        }

        .stat-value-compact {
          color: rgba(255, 255, 255, 0.9) !important;
        }
      }

      .stat-trend-compact {
        &.up {
          color: #95de64 !important;
          background: rgba(82, 196, 26, 0.15) !important;
          border: 1px solid rgba(82, 196, 26, 0.3) !important;
        }

        &.down {
          color: #ff7875 !important;
          background: rgba(255, 77, 79, 0.15) !important;
          border: 1px solid rgba(255, 77, 79, 0.3) !important;
        }
      }
    }
  }

  /* 首页文字暗色模式样式 */
  .home {
    color: rgba(255, 255, 255, 0.85) !important;
    
    h2 {
      color: rgba(255, 255, 255, 0.95) !important;
    }
    
    h4 {
      color: rgba(255, 255, 255, 0.9) !important;
    }
    
    p {
      color: rgba(255, 255, 255, 0.8) !important;
      
      b, strong {
        color: rgba(255, 255, 255, 0.9) !important;
      }
      
      span {
        color: rgba(255, 255, 255, 0.85) !important;
      }
    }
    
    ul, ol {
      li {
        color: rgba(255, 255, 255, 0.8) !important;
      }
    }
    
    /* 统一所有卡片标题暗色模式样式 - 使用最高优先级确保覆盖所有硬编码颜色 */
    .home {
      /* 确保主页整体文字在暗色模式下可见 - 使用纯白色提高对比度 */
      color: #ffffff !important;
      
      * {
        color: inherit;
      }
      
      h2, h4 {
        color: #ffffff !important;
      }
      
      p {
        color: #ffffff !important;
        
        b, strong {
          color: #ffffff !important;
        }
        
        span {
          color: #ffffff !important;
        }
      }
      
      ul, ol {
        li {
          color: #ffffff !important;
        }
      }
      
      /* 覆盖所有统计卡片文字 */
      .stat-card {
        .stat-label-compact {
          color: rgba(255, 255, 255, 0.8) !important;
        }
        
        .stat-value-compact {
          color: #ffffff !important;
        }
      }
      
      .el-card {
        :deep(.el-card__header) {
          border-bottom-color: rgba(255, 255, 255, 0.1) !important;
          color: #ffffff !important;
        }
        
        .chart-header,
        .card-header {
          .chart-title,
          .card-title {
            color: #ffffff !important;
          }
        }
        
        .chart-header {
          .chart-subtitle {
            color: rgba(255, 255, 255, 0.8) !important;
          }
        }
        
        /* 确保卡片内容在暗色模式下可见 */
        :deep(.el-card__body) {
          color: #ffffff !important;
        }
        
        .body {
          color: #ffffff !important;
          
          p {
            color: #ffffff !important;
            
            strong {
              color: #ffffff !important;
            }
          }
          
          ul, ol {
            li {
              color: #ffffff !important;
            }
          }
          
          code {
            background-color: rgba(255, 255, 255, 0.2) !important;
            color: #ffffff !important;
          }
          
          kbd {
            background-color: rgba(255, 255, 255, 0.2) !important;
            color: #ffffff !important;
            border-color: rgba(255, 255, 255, 0.4) !important;
          }
          
          a {
            color: #66b1ff !important;
            
            &:hover {
              color: #85c1ff !important;
            }
          }
        }
      }
      
      /* 覆盖所有可能的灰色文字 */
      .chart-title,
      .card-title,
      .chart-subtitle,
      span,
      div {
        &[style*="color"] {
          color: #ffffff !important;
        }
      }
    }
  }

}

